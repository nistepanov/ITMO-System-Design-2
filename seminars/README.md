# Консольный чат с использованием Rabbit-MQ

## Общая логика

1. **Класс `Consumer`**:
   - Отвечает за получение сообщений.
   - Подключается к каналу, слушает сообщения и вызывает коллбек при их поступлении.
   - Позволяет переключать каналы.

2. **Класс `Producer`**:
   - Отвечает за отправку сообщений.
   - Подключается к каналу и отправляет сообщения.
   - Позволяет переключать каналы.

3. **Класс `ChatClient`**:
   - Управляет логикой работы чата, объединяя продюсера и консюмера.
   - Обрабатывает команды пользователя (`!switch` для переключения канала и текст для отправки сообщений).
   - Создает поток для прослушивания сообщений.

4. **Запуск клиента**:
   - Читаются параметры командной строки для начального канала и сервера.
   - Создается клиент, который подключается к RabbitMQ и начинает работу.

---

### Как это работает

1. При запуске клиент подключается к серверу RabbitMQ и к указанному каналу (или `default`, если канал не указан).
2. Отправка сообщений выполняется через продюсера.
3. Получение сообщений выполняется через консюмера в отдельном потоке.
4. Переключение канала обновляет как продюсера, так и консюмера.

---

### Запуск
Написан небольшой **bash** скрипт, который поднимает **RabbitMQ** и запускает скрипт с параметрами по умолчанию, 
пример запуска:
```bash
/bin/bash /ITMO-System-Design-2/seminars/start.sh
```

Так же можно явно запустить **Python** скрипт с нужными параметрами


### Пример

**Клиент 1**:
```plaintext
[*] Чат-клиент запущен. Текущий сервер: 127.0.0.1, начальный канал: default
>> Привет всем!
>> !switch channel1
[*] Переключились на канал 'channel1'.
>> Сообщение для channel1
```

**Клиент 2**:
```plaintext
[*] Чат-клиент запущен. Текущий сервер: 127.0.0.1, начальный канал: default
>> [default] Привет всем!
>> !switch channel1
[*] Переключились на канал 'channel1'.
>> [channel1] Сообщение для channel1
```